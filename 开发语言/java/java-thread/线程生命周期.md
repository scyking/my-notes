# 线程生命周期

标签（空格分隔）： java-thread

---

[toc]

## 线程状态转换

```
+-----+       +----------+                       +---------+       +------+
| new | ----> | runnable | <--- cpu资源调度 --->  | running | ----> | dead |
+-----+       +----------+                       +---------+       +------+
                    ^                                 |
                    |                                 |
                    |           +---------+           |
                    +---------  | blocked | <---------+
                                +---------+
```

## 线程状态

1. 新建（new）

	创建线程。`Thread t = new MyThread();`

2. 就绪（runnable）

	线程处于可随时被cpu调度状态。执行`start()`启动线程。
	
3. 运行（running）

	线程被cpu调度，持续运行。调用`yield()`可让出cpu资源（不一定生效）。

4. 阻塞（blocked）

	处于`running`状态中的线程由于某种原因，暂时放弃对CPU的使用权，停止执行，直到其进入到就绪状态，才有机会再次被CPU调度。

	- 等待阻塞：执行`wait()`使线程挂起（会释放锁）。直到线程得到`notify()`或`notifyAll()`消息，线程才会进入`runnable`状态。

	- 同步阻塞：获取`synchronized`同步锁失败。

	- 其他阻塞：

        - 执行`sleep(milliseconds)`（中止执行给定时间，不会释放锁）；
        - 执行`join()`加入一个线程，原线程被挂起，直到目标线程结束；
        - 发出了`I/O`请求。

5. 死亡（dead）

	线程运行结束（线程任务执行完成/异常退出）。




